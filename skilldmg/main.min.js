var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};
$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];if(b)return b.call(a);if("number"==typeof a.length)return $jscomp.arrayIterator(a);throw Error(String(a)+" is not an iterable or ArrayLike");};window.onload=initialize;var fSkills,lastSkill;HTMLElement.prototype.setAttributes=function(){if(0<arguments.length&&0==arguments.length%2)for(var a=0;arguments.length>a;a+=2)this.setAttribute(arguments[a],arguments[a+1])};
Array.prototype.suffix=function(a){for(var b=[],c=$jscomp.makeIterator(this),d=c.next();!d.done;d=c.next())b.push(d.value+a);return b};function readFile(a,b){var c=new FileReader;c.readAsText(a.target.files[0]);c.onload=function(d,f,g){return d(f,g)}.bind(null,b,a)}function getSkill(a){return isNaN(a)?fSkills[a]:Object.values(fSkills)[parseInt(a)]}
function fillSkills(){var a=document.getElementById("skills");a.innerHTML="";for(var b in fSkills){var c=fSkills[b],d=document.createElement("option");d.setAttributes("value",c.Id,"name",b);d.innerText=b;"0"==c.Id&&d.setAttribute("selected","");a.appendChild(d)}}function handleSkOpt(a){fSkills&&lastSkill!=a.target.value&&(lastSkill=a.target.value,doSkillCalc(a.target.value,!0))}
function handleNShift(a){fSkills&&/^[0-8]$/.test(a.target.value)&&doSkillCalc(document.getElementById("skills").value,!1)}function handleCNInp(a){fSkills&&/^-?(0|[1-9]\d*)(\.\d+)?$/.test(a.target.value)&&doSkillCalc(document.getElementById("skills").value,!1)}function handleCInp(a){fSkills&&doSkillCalc(document.getElementById("skills").value,!1)}
function doSkillCalc(a,b){void 0==a&&(a=0);void 0==b&&(b=!0);var c=getSkill(a),d=document.getElementById("dtypes"),f=document.getElementById("sklvl").value,g=document.getElementById("syndmg").value;""==c.EType&&b?(d.value="phys",document.getElementById("mind").value=c.MinDam,document.getElementById("midlv1").value=c.MinLevDam1,document.getElementById("midlv2").value=c.MinLevDam2,document.getElementById("midlv3").value=c.MinLevDam3,document.getElementById("midlv4").value=c.MinLevDam4,document.getElementById("midlv5").value=
c.MinLevDam5,document.getElementById("maxd").value=c.MaxDam,document.getElementById("madlv1").value=c.MaxLevDam1,document.getElementById("madlv2").value=c.MaxLevDam2,document.getElementById("madlv3").value=c.MaxLevDam3,document.getElementById("madlv4").value=c.MaxLevDam4,document.getElementById("madlv5").value=c.MaxLevDam5,document.getElementById("dlen").value=0,document.getElementById("lenlv1").value=0,document.getElementById("lenlv2").value=0,document.getElementById("lenlv3").value=0):b&&(d.value=
c.EType,document.getElementById("mind").value=c.EMin,document.getElementById("midlv1").value=c.EMinLev1,document.getElementById("midlv2").value=c.EMinLev2,document.getElementById("midlv3").value=c.EMinLev3,document.getElementById("midlv4").value=c.EMinLev4,document.getElementById("midlv5").value=c.EMinLev5,document.getElementById("maxd").value=c.EMax,document.getElementById("madlv1").value=c.EMaxLev1,document.getElementById("madlv2").value=c.EMaxLev2,document.getElementById("madlv3").value=c.EMaxLev3,
document.getElementById("madlv4").value=c.EMaxLev4,document.getElementById("madlv5").value=c.EMaxLev5,document.getElementById("dlen").value=c.ELen,document.getElementById("lenlv1").value=c.ELevLen1,document.getElementById("lenlv2").value=c.ELevLen2,document.getElementById("lenlv3").value=c.ELevLen3);b&&(document.getElementById("dshift").value=""==c.HitShift?0:parseInt(c.HitShift));c=[document.getElementById("mind").value,document.getElementById("midlv1").value,document.getElementById("midlv2").value,
document.getElementById("midlv3").value,document.getElementById("midlv4").value,document.getElementById("midlv5").value,document.getElementById("maxd").value,document.getElementById("madlv1").value,document.getElementById("madlv2").value,document.getElementById("madlv3").value,document.getElementById("madlv4").value,document.getElementById("madlv5").value,document.getElementById("dlen").value,document.getElementById("lenlv1").value,document.getElementById("lenlv2").value,document.getElementById("lenlv3").value];
f=calcSkillDamage(d.value,parseInt(f),document.getElementById("dshift").value,parseFloat(g),c);document.getElementById("totaldmg").innerText=f.min+" ~ "+f.max;document.getElementById("totaldmglen").innerText=f.len/25+" /s";switch(d.value){case "phys":document.getElementById("totaldmg").setAttribute("class","ctext dColorPhys");document.getElementById("totaldmglen").setAttribute("class","ctext dColorPhys");break;case "fire":document.getElementById("totaldmg").setAttribute("class","ctext dColorFire");
document.getElementById("totaldmglen").setAttribute("class","ctext dColorFire");break;case "ltng":document.getElementById("totaldmg").setAttribute("class","ctext dColorLtng");document.getElementById("totaldmglen").setAttribute("class","ctext dColorLtng");break;case "mag":document.getElementById("totaldmg").setAttribute("class","ctext dColorMag");document.getElementById("totaldmglen").setAttribute("class","ctext dColorMag");break;case "cold":document.getElementById("totaldmg").setAttribute("class",
"ctext dColorCold");document.getElementById("totaldmglen").setAttribute("class","ctext dColorCold");break;case "pois":document.getElementById("totaldmg").setAttribute("class","ctext dColorPois");document.getElementById("totaldmglen").setAttribute("class","ctext dColorPois");break;default:document.getElementById("totaldmg").setAttribute("class","ctext ltheme"),document.getElementById("totaldmglen").setAttribute("class","ctext ltheme")}}
function calcSkillDamage(a,b,c,d,f){for(var g in f)f[g]=""==f[g]?0:parseInt(f[g]);var e=$jscomp.makeIterator(f);f=e.next().value;g=e.next().value;var q=e.next().value,r=e.next().value,t=e.next().value,u=e.next().value,p=e.next().value,v=e.next().value,w=e.next().value,x=e.next().value,y=e.next().value,z=e.next().value,n=e.next().value,A=e.next().value,B=e.next().value;e=e.next().value;var l={min:0,max:0,len:0},h=0,k=0,m=0;8>=b?m=A*(b-1):8<b&&16>=b?m=B*(b-1):17<=b&&(m=e*(b-1));8>=b?(h=g*(b-1),k=v*
(b-1)):8<b&&16>=b?(h=q*(b-1),k=w*(b-1)):16<b&&22>=b?(h=r*(b-1),k=x*(b-1)):22<b&&28>=b?(h=t*(b-1),k=y*(b-1)):29<=b&&(h=u*(b-1),k=z*(b-1));"pois"==a?(l.min=((f+h)*(n+m)/Math.pow(2,8-c)*(1+d/100)).toFixed(2),l.max=((p+k)*(n+m)/Math.pow(2,8-c)*(1+d/100)).toFixed(2)):(l.min=((f+h)/Math.pow(2,8-c)*(1+d/100)).toFixed(2),l.max=((p+k)/Math.pow(2,8-c)*(1+d/100)).toFixed(2));l.len=n+m;return l}
function handleTxt(a){readFile(a,function(b,c){var d=c.target.result;switch(b.target.files[0].name.toLowerCase()){case "skills.txt":if("skill\t"!=d.substring(0,6))return alert("This is not a valid Skills.txt");fSkills=txtLib.parse(d);break;default:return alert("This file is not supported.")}fSkills&&(document.getElementById("upload").style.display="none",document.getElementById("editable").style.display="inline-block",fillSkills(),doSkillCalc(0))})}
function initialize(){document.getElementById("skillsf").addEventListener("change",handleTxt,!1);document.getElementById("skills").addEventListener("mouseup",handleSkOpt,!1);document.getElementById("sklvl").addEventListener("keyup",handleCNInp,!1);document.getElementById("syndmg").addEventListener("keyup",handleCNInp,!1);document.getElementById("dtypes").addEventListener("mouseup",handleCInp,!1);document.getElementById("dshift").addEventListener("keyup",handleNShift,!1);document.getElementById("mind").addEventListener("keyup",
handleCNInp,!1);document.getElementById("midlv1").addEventListener("keyup",handleCNInp,!1);document.getElementById("midlv2").addEventListener("keyup",handleCNInp,!1);document.getElementById("midlv3").addEventListener("keyup",handleCNInp,!1);document.getElementById("midlv4").addEventListener("keyup",handleCNInp,!1);document.getElementById("midlv5").addEventListener("keyup",handleCNInp,!1);document.getElementById("maxd").addEventListener("keyup",handleCNInp,!1);document.getElementById("madlv1").addEventListener("keyup",
handleCNInp,!1);document.getElementById("madlv2").addEventListener("keyup",handleCNInp,!1);document.getElementById("madlv3").addEventListener("keyup",handleCNInp,!1);document.getElementById("madlv4").addEventListener("keyup",handleCNInp,!1);document.getElementById("madlv5").addEventListener("keyup",handleCNInp,!1);document.getElementById("dlen").addEventListener("keyup",handleCNInp,!1);document.getElementById("lenlv1").addEventListener("keyup",handleCNInp,!1);document.getElementById("lenlv2").addEventListener("keyup",
handleCNInp,!1);document.getElementById("lenlv3").addEventListener("keyup",handleCNInp,!1)};
